<!DOCTYPE html>
<html lang="ja">
<head>
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Cache-Control" content="no-cache" />
<meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8" />
<meta content="Uchida Masatomo" name="author">
<title>DynamoDB</title>
</head>
<body>
<h2><a href="https://aws.amazon.com/jp/documentation/dynamodb/">DynamoDB</a></h2><p />

事前準備<p />
<blockquote>
	$ aws configure<br />
	AWS Access Key ID [None]:<br /> 
	AWS Secret Access Key [None]:<br /> 
	Default region name [None]: ap-northeast-1<br /> 
	Default output format [None]: json<br />
</blockquote>

データの一覧<p />
<blockquote>
	$ aws dynamodb scan --table-name cities<p />
</blockquote>


検索<br />
<blockquote>
	$ aws dynamodb get-item --table-name cities  --key '{ "key": {"S": "t0922" }  }'<p />
</blockquote>

データの挿入<p />
<blockquote>
	$ aws dynamodb put-item --table-name cities --item '{ "population": { "N": "38164" }, "date_mod": { "S": "1950-6-22" }, "key": { "S": "t0924" }, "name": { "S": "足利" } }'<p />
</blockquote>

データの削除<p />
<blockquote>
	$ aws dynamodb delete-item --table-name cities  --key '{"key": {"S": "t0924"}}'<p />
</blockquote>

テーブルの削除<p />
<blockquote>
	$ aws dynamodb delete-table --table-name cities<p />
</blockquote>

テーブルの作成<p />
<blockquote>
	$ aws dynamodb create-table --table-name 'cities' \<br />
--attribute-definitions '[{"AttributeName":"key","AttributeType": "S"}]' \<br />
--key-schema '[{"AttributeName":"key","KeyType": "HASH"}]' \<br />
--provisioned-throughput '{"ReadCapacityUnits": 5,"WriteCapacityUnits": 5}'<p />
</blockquote>

テーブルの一覧<p />
<blockquote>
	$ aws dynamodb list-tables<p />
</blockquote>

項目数<p />
<blockquote>
	$ aws dynamodb describe-table --table-name cities<p />
</blockquote>

AWS SDK for PHP<p />
<blockquote>
	$ curl -sS https://getcomposer.org/installer | php<p />
	$ php composer.phar require aws/aws-sdk-php<p />
</blockquote>

PHP のサンプル (AWS のDynamoDB へ接続)<p />
<blockquote>
	<a href="php_aws/cities_create_table.php.txt">cities_create_table.php</a><p />
	<a href="php_aws/cities_delete_table.php.txt">cities_delete_table.php</a><p />
	<a href="php_aws/cities_insert.php.txt">cities_insert.php</a><p />
	<a href="php_aws/cities_search.php.txt">cities_search.php</a><p />
	<a href="php_aws/cities_scan.php.txt">cities_scan.php</a><p />
	<a href="php_aws/aws_config.php.txt">aws_config.php</a><p />
</blockquote>

PHP のサンプル (AWS のDynamoDB へ接続,バッチでのデータの挿入)<p />
<blockquote>
	<a href="php_aws_batch/batch_create_table.php.txt">batch_create_table.php</a><p />
	<a href="php_aws_batch/batch_delete_table.php.txt">batch_delete_table.php</a><p />
	<a href="php_aws_batch/batch_write.php.txt">batch_write.php</a><p />
	<a href="php_aws_batch/batch_scan.php.txt">batch_scan.php</a><p />
</blockquote>


Python (ダウンロード可能バージョンへの接続）<p />
<blockquote>
<a href="http://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/gettingstartedguide/GettingStarted.Python.html">Python および DynamoDB</a><p />
$ sudo pip install boto3<p />
	<blockquote>
	<a href="http://boto3.readthedocs.io/en/latest/guide/quickstart.html#configuration">Bot 3  Quickstart</a><p />
	以下のファイルを作成する<p />
		<blockquote>
		.aws/credentials<br />
		.aws/config<br />
		</blockquote>
	</blockquote>
	<a href="python/cities_create_table.py.txt">cities_create_table.py</a><p />
	<a href="python/cities_delete_table.py.txt">cities_delete_table.py</a><p />
	<a href="python/cities_insert.py.txt">cities_insert.py</a><p />
	<a href="python/cities_query.py.txt">cities_query.py</a><p />
</blockquote>

PHP (ダウンロード可能バージョンへの接続）<p />
<blockquote>
	<a href="php_local/cities_create_table.php.txt">cities_create_table.php</a><p />
	<a href="php_local/cities_delete_table.php.txt">cities_delete_table.php</a><p />
	<a href="php_local/cities_insert_local.php.txt">cities_insert_local.php</a><p />
	<a href="php_local/cities_scan_local.php.txt">cities_scan_local.php</a><p />
	<a href="php_local/cities_count_local.php.txt">cities_count_local.php</a><p />
</blockquote>

<hr />
<a href="../">Return</a><p />
Feb/24/2017 AM 08:15<p />
</body>
</html>

<!DOCTYPE html>
<html lang="ja">
<head>
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Cache-Control" content="no-cache" />
<meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8" />
<meta content="Uchida Masatomo" name="author">
<title>docker Jan/14/2016</title>
</head>
<body>
<h2>Docker</h2><p />
<blockquote>
An open platform for distributed applications<p />
</blockquote>

Information<br />
<blockquote>
<a href="https://wiki.archlinux.org/index.php/Docker_%28%E6%97%A5%E6%9C%AC%E8%AA%9E%29">Docker (日本語)</a><p />
</blockquote>

Install on Arch Linux<br />
<blockquote>
# pacman -S docker<p />
# systemctl start docker<p />
docker を通常ユーザーで実行できるようにする<br />
<blockquote>
	# gpasswd -a uchida docker<p />
</blockquote>
確認<br />
<blockquote>
$ export http_proxy=""<br />
$ export NO_PROXY="/var/run/docker.sock"<br />
$ docker version<br />
$ docker info<br />
</blockquote>

<a href="docker.service.txt">/usr/lib/systemd/system/docker.service</a><p />
	<blockquote>
	Environment="http_proxy=http://user:passwd@host_proxy:80/"
	</blockquote>
$ docker pull ubuntu:latest<p />
	<blockquote>
	<pre>
ubuntu:latest: The image you are pulling has been verified
511136ea3c5a: Pull complete 
53f858aaaf03: Pull complete 
837339b91538: Pull complete 
615c102e2290: Pull complete 
b39b81afc8ca: Pull complete 
Status: Downloaded newer image for ubuntu:latest
	</pre>
	</blockquote>
$ docker images<p />
	<blockquote>
	<pre>
REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
ubuntu              latest              c4ff7513909d        7 days ago          213 MB
	</pre>
	</blockquote>
ubuntuイメージからubuntu1コンテナーを作成、端末を開きbashを実行<p />
	<blockquote>
	$ docker run -it --name ubuntu1 ubuntu /bin/bash<p />
	</blockquote>
	再実行<p />
	<blockquote>
	$ docker start -i ubuntu1<p />
	</blockquote>
	コンテナーの一覧を確認<p />
	<blockquote>
	$ docker ps -a<p />
	<pre>
	CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
aed97425cbd0        ubuntu:latest       "/bin/bash"         17 minutes ago      Up 4 minutes                            ubuntu1        
	</pre>
	</blockquote>


</blockquote>

$ docker commit ubuntu1 uchida/nginx<p />


$ docker run -it --name nginx2 uchida/nginx /bin/bash<p />

停止した nginx2 コンテナで再度bashを実行する場合<br />
<blockquote>
	# docker start -i nginx2<p />
</blockquote>

<hr />
ホストで、ルートの設定<p />
<blockquote>
# route add -net 172.17.0.0/16 gw 172.17.42.1<p />
</blockquote>

$ docker pull fedora:latest<p />

<a href="fedora.html">fedora on docker</a><p />
<hr />
Install on Ubuntu<p />
<a href="http://www.atmarkit.co.jp/ait/articles/1406/10/news031.html">
Dockerのインストールと主なコマンドの使い方</a><p />
<blockquote>
# apt-get install docker.io<p />
# update-rc.d docker.io defaults<p />
# docker info<p />
<blockquote>
<pre>
Containers: 0
Images: 0
Storage Driver: aufs
 Root Dir: /var/lib/docker/aufs
 Backing Filesystem: extfs
 Dirs: 0
 Dirperm1 Supported: true
Execution Driver: native-0.2
Kernel Version: 4.2.0-23-generic
Operating System: Ubuntu 15.10
CPUs: 2
Total Memory: 7.529 GiB
Name: cdea022
ID: OU72:QOKN:FKAB:VZME:B2OI:CLMA:STE7:7LLE:Z7NM:EN7S:TQBD:YPOZ
WARNING: No swap limit support
</pre>
</blockquote>

# docker version<p />
<blockquote>
<pre>
Client version: 1.6.2
Client API version: 1.18
Go version (client): go1.5.1
Git commit (client): 7c8fca2
OS/Arch (client): linux/amd64
Server version: 1.6.2
Server API version: 1.18
Go version (server): go1.5.1
Git commit (server): 7c8fca2
OS/Arch (server): linux/amd64
</pre>
</blockquote>

# gpasswd -a uchida docker<p />

/etc/default/docker<p />
	<blockquote>
	export http_proxy="http://user:password@server_proxy:80"<p />
	export https_proxy="http://user:password@server_proxy:80"<p />
	</blockquote>
</blockquote>

<hr />
Vagrantでは構成情報を記述した設定ファイルを用意して簡単なコマンドを実行するだけで、仮想ディスクイメージのダウンロード、仮想マシンの作成や起動、そしてプロビジョニング用のコマンドの発行といったタスクを実行できる<p />

Install<br />
<blockquote>
# packman -S vagrant<p />
# packman -S virtualbox<p />
# pacman -S virtualbox-host-modules<p />
</blockquote>
<blockquote>
	$ vagrant init<p />
	$ vagrant up<p />
</blockquote>
<hr />
# docker rm `docker ps -a -q`<p />
<hr />
コンテナーの一覧<br />
<blockquote>
	# docker ps<p />
	# docker ps -a<p />
</blockquote>
<hr />
<a href="/data_base/">Return</a><p />
Jan/14/2016 AM 08:15<p />
</body>
</html>

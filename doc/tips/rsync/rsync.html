<!DOCTYPE html>
<html lang="ja">
<head>
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Cache-Control" content="no-cache" />
<meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8" />
<meta content="Uchida Masatomo" name="author">
<title>rsync Apr/02/2015</title>
</head>
<body>
<h2>rsync</h2><p />

host_remote のフォルダーを同期する。<p />
<blockquote>
rsync -avz --delete uchida@host_remote:tmp/jul04_2014/ /home/uchida/tmp/jul04_2014<p />
</blockquote>

ssh のポートが 2222 の時<p />
<blockquote>
rsync -avz --delete -e "ssh -p 2222"  uchida@host_remote:tmp/jul04_2014/ /home/uchida/tmp/jul04_2014<p />
</blockquote>

公開鍵を使う<p />
<blockquote>
rsync -avz --delete -e "ssh -i $HOME/.ssh/key_aaa"  uchida@host_remote:tmp/jul04_2014/ /home/uchida/tmp/jul04_2014<p />
</blockquote>

<hr />
rsync -avz --delete folder_src folder_target<br />
<blockquote>
rsync: failed to set permissions on<p />
	<blockquote>
	-aを-rlOtにする<p />
	</blockquote>
</blockquote>
<hr />
Server<p />
<blockquote>
# systemctl start rsyncd<p />
</blockquote>
設定ファイル<p />
<blockquote>
<a href="rsyncd.conf.txt">/etc/rsyncd.conf</a><p />
</blockquote>

Client<p />
<blockquote>
<pre>
$ rsync host_rsync::
xml_file       	XML
json           	JSON
ftp            	ftp area
$
</pre>
</blockquote>
rsync サーバーとの同期<p />
<blockquote>
rsync -avz --delete rsync://host_rsync/ftp/ /tmp/ftp<p />
rsync -avz --delete rsync://host_rsync/var_tmp/json/ /var/tmp/json<p />
rsync -avz --delete rsync://host_rsync/var_tmp/xml_file/ /var/tmp/xml_file<p />
</blockquote>
<hr />
Ubuntu での設定<br />
<blockquote>
# cp /usr/share/doc/rsync/examples/rsyncd.conf /etc<p />
/etc/default/rsync を編集<br />
	<blockquote>
	RSYNC_ENABLE=true<p />
	</blockquote>
# service rsync start<br />
<pre>
 * Starting rsync daemon rsync                                           [ OK ] 
</pre>

</blockquote>

<hr />

<blockquote>
@ERROR: chdir failed<br />
rsync error: error starting client-server protocol (code 5) at main.c(1635) [Receiver=3.1.1]<br />
</blockquote>
<hr />
<a href="/data_base/">Return</a><p />
Apr/02/2015 AM 08:15<p />
</body>
</html>

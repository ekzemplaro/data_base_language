// --------------------------------------------------------------------
/*
	xml_create.cpp

				Feb/28/2012


*/
// --------------------------------------------------------------------
#include	<iostream>
#include	<fstream>
#include	<sstream>
#include	<string>
#include	<map>

#include	<string.h>

using namespace std;

typedef map<string,string> Unit;

// --------------------------------------------------------------------
extern	void dict_display_proc (map <string,Unit> dict_aa);
extern	map <string,Unit> dict_append_proc
	(map <string,Unit> dict_aa,string id,string name,
	int population,string date_mod);
// --------------------------------------------------------------------
static void tag_out_proc (ofstream *afp_out,string str_key,string data_in)
{
	string tag_aa = "<";
 
	*afp_out << "<" << str_key << ">";
	*afp_out << data_in;
	*afp_out << "</" << str_key << ">";
}

// --------------------------------------------------------------------
static void data_prepare_unit (ofstream *afp_out,
	string id_in,string name_in,int population_in,string date_mod_in)
{
	*afp_out << "<";
	*afp_out << id_in;
	*afp_out << ">";

	tag_out_proc (afp_out,"name",name_in);
	std:ostringstream ss;
	ss.str ("");
	ss.clear (stringstream::goodbit);
	ss << population_in;
	tag_out_proc (afp_out,"population",ss.str ());
	tag_out_proc (afp_out,"date_mod",date_mod_in);

	*afp_out << "</";
	*afp_out << id_in;
	*afp_out << ">";

}

// --------------------------------------------------------------------
static void data_out_proc (ofstream *afp_out)
{
	*afp_out << "<?xml version=\"1.0\" encoding=\"utf-8\"?><root>\n";

	data_prepare_unit (afp_out,"t2261","静岡",51437,"1922-9-7");
	data_prepare_unit (afp_out,"t2262","浜松",62985,"1922-12-12");
	data_prepare_unit (afp_out,"t2263","沼津",83924,"1922-5-28");
	data_prepare_unit (afp_out,"t2264","三島",25451,"1922-7-21");

	data_prepare_unit (afp_out,"t2265","富士",81978,"1922-1-5");
	data_prepare_unit (afp_out,"t2266","熱海",79462,"1922-5-22");
	data_prepare_unit (afp_out,"t2267","富士宮",46785,"1922-7-17");
	data_prepare_unit (afp_out,"t2268","藤枝",54812,"1922-3-4");
	data_prepare_unit (afp_out,"t2269","御殿場",37521,"1922-5-9");
	data_prepare_unit (afp_out,"t2270","島田",42397,"1922-8-15");

	*afp_out << "</root>\n";
}

// --------------------------------------------------------------------
static map <string,Unit >  data_prepare_proc ()
{
	map <string,Unit> dict_aa;

	dict_aa = dict_append_proc (dict_aa,"t2261","静岡",79526,"1922-10-07");

	dict_aa = dict_append_proc (dict_aa,"t2262","浜松",98231,"1922-12-12");
	dict_aa = dict_append_proc (dict_aa,"t2263","沼津",23429,"1922-3-28");
	dict_aa = dict_append_proc (dict_aa,"t2264","三島",51486,"1922-9-21");

	dict_aa = dict_append_proc (dict_aa,"t2265","富士",83971,"1922-1-5");
	dict_aa = dict_append_proc (dict_aa,"t2266","熱海",74948,"1922-5-22");
	dict_aa = dict_append_proc (dict_aa,"t2267","富士宮",46785,"1922-7-17");
	dict_aa = dict_append_proc (dict_aa,"t2268","藤枝",59614,"1922-3-04");
	dict_aa = dict_append_proc (dict_aa,"t2269","御殿場",71823,"1922-5-9");

	return	dict_aa;
}

// --------------------------------------------------------------------
int main (int argc,char *argv[])
{
	cerr << "*** 開始 ***\n";

	char file_out[160];

	strcpy (file_out,argv[1]);

	cerr << "\tfile_out = " << file_out << "\n";

	ofstream fp_out (file_out);

	data_out_proc (&fp_out);

	fp_out.close ();

	cerr << "*** 終了 ***\n";
}

// --------------------------------------------------------------------

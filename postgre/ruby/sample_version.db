#! /usr/bin/ruby
#
require "dbi"

   begin
	dbi=DBI.connect("dbi:Pg:city:cdbd026","uchida","hello9")
       # サーババージョンの文字列を取得して、表示する。
       row = dbi.select_one("SELECT VERSION()")
       puts "Server version: " + row[0]
   rescue DBI::DatabaseError => e
       puts "An error occurred"
       puts "Error code: #{e.err}"
       puts "Error message: #{e.errstr}"
   ensure
       # サーバから切断
       dbi.disconnect if dbi
   end

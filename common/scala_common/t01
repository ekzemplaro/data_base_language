def mcached_update_proc (server:String,port:Int,key_in:String,population_in:Int)
{
	System.out.println ("*** mcached_update_proc ***");
	System.out.println ("key_in = " + key_in);

	var sock = new Socket (server,port)

	var iis = sock.getInputStream ()
	var input = new DataInputStream (iis)
	var rr = new InputStreamReader (iis)
	var output = new DataOutputStream (sock.getOutputStream ())

	var unit_aa = mcached_manipulate.get_record_proc (key_in,rr,output)

	if (unit_aa != null)
		{
		unit_aa("population") = "%d".format (population_in)
		val date_mod_new = text_manipulate.get_current_date_proc ()
		unit_aa("date_mod") = date_mod_new

		val unit_bb = unit_aa.toMap
		val json_str = compact(render(unit_bb))
		println (json_str)

		mcached_manipulate.mcached_socket_write_proc (key_in,json_str,input,output)
		}

	input.close ()
	output.close ()
	sock.close ()
}
